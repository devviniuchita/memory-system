<div align="center">

![Memory System Logo](./images/memory.png)

# üß† MEMORY SYSTEM ‚Äì AI AGENT EVOLUTION LAYER

> Sistema de Mem√≥ria Dual-Brain com Orquestra√ß√£o Evolutiva para LLMs via Triple MCP Integration (Byterover + Supermemory + Memory)

---

## 1. APRESENTA√á√ÉO

O **Memory System** foi criado para resolver um problema recorrente em fluxos de trabalho com LLMs: perda de contexto, baixa reutiliza√ß√£o de conhecimento e aus√™ncia de crit√©rios estruturados para reten√ß√£o e descarte de mem√≥rias. Em cen√°rios reais, prompts repetitivos, respostas inconsistentes e incapacidade de capitalizar em aprendizados passados degradam performance e elevam custos.

Este projeto introduz uma camada de evolu√ß√£o de agentes baseada em dois arquivos centrais (arquitetura **Dual-Brain**):

- **`memory-rules.mdc`**: Como executar (orquestra recupera√ß√£o + grava√ß√£o + pol√≠ticas + fallback)
- **`memory-rating.mdc`**: Quando e com que qualidade (classifica√ß√£o, reten√ß√£o, decay, pruning, evolu√ß√£o)

Esses dois ‚Äúc√©rebros‚Äù operam em ciclo cont√≠nuo apoiados por **Triple MCP Integration** para recupera√ß√£o e armazenamento de conhecimento:

- **Byterover MCP** ‚Äì Knowledge Graph sem√¢ntico persistente
- **Supermemory-ai MCP** ‚Äì Armazenamento sem√¢ntico (padr√µes e prefer√™ncias)
- **Memory MCP** ‚Äì Fallback resiliente local

> Resultado: A LLM ganha persist√™ncia contextual, otimiza√ß√£o adaptativa de mem√≥ria e loops de auto-melhoria guiados por regras expl√≠citas.

---

## 2. ARQUITETURA (DUAL-BRAIN + 9 FASES + TRIPLE MCP)

### 2.1 Vis√£o Macro

```
User Input ‚Üí (PHASE 1 RETRIEVE) ‚Üí Context Enrichment ‚Üí Execu√ß√£o ‚Üí (PHASE 4 STORE) ‚Üí Rating / Validation ‚Üí Evolu√ß√£o ‚Üí Pr√≥ximas Intera√ß√µes
```

### 2.2 Fluxo 9 Fases

```yaml
PHASE 1: RETRIEVE # Busca contexto relevante (3 MCPs)
PHASE 2: ENRICH # Enriquece com rela√ß√µes sem√¢nticas / grafo
PHASE 3: EXECUTE # A√ß√£o com quality gates ativos
PHASE 4: STORE # Armazena somente se sucesso / relev√¢ncia
PHASE 5: UPDATE # Ajusta grafos / √≠ndices / metadados
PHASE 6: OPTIMIZE # Refina reten√ß√£o / compress√£o
PHASE 7: VALIDATE # Seguran√ßa / compliance / consist√™ncia
PHASE 8: EVOLVE # Melhoria cont√≠nua baseada em scoring
PHASE 9: SCALE # Estrat√©gias de expans√£o / fallback
```

### 2.3 Dual-Brain Responsibilities

| Arquivo             | Papel           | √änfase                                       |
| ------------------- | --------------- | -------------------------------------------- |
| `memory-rules.mdc`  | Execution Brain | Fluxo, orchestration, fallback, pol√≠ticas    |
| `memory-rating.mdc` | Quality Brain   | Scoring, reten√ß√£o, decay, promo√ß√£o / pruning |

### 2.4 Triple MCP Integration

| MCP            | Fun√ß√£o                       | Quando Usado                           |
| -------------- | ---------------------------- | -------------------------------------- |
| Byterover      | Knowledge Graph / rela√ß√µes   | Retrieve + Store + Enrichment          |
| Supermemory-ai | Mem√≥ria sem√¢ntica contextual | Retrieve + Store                       |
| Memory         | Fallback / resili√™ncia       | Retrieve (fallback) + Store (fallback) |

### 2.5 Benchmarks / Metas

```yaml
success_metrics:
  relevance_accuracy: '>90%'
  retrieval_speed: '<200ms'
  reliability: '>99.9%'
  embedding_speed: '<50ms'
  cost_reduction: '-55% tempo vs abordagem tradicional'
```

### 2.6 Pol√≠tica de Reten√ß√£o (Exemplo)

```yaml
retention_policy:
  persistent_if:
    relevance_score: '>0.9'
    recurrence: '>3'
    context_depth: '>0.8'
  decay_if:
    time_since_last_use: '>3d'
    relevance_score: '<0.4'
```

> A Arquitetura √© COMPLETAMENTE aplicada antes do tutorial. A partir daqui, inicia-se a parte operacional.

---

## 3. TUTORIAL ‚Äì VIS√ÉO GERAL

Esta se√ß√£o guia a configura√ß√£o completa. Ordem obrigat√≥ria:

1. Instala√ß√£o dos MCPs (Imagens 1‚Äì3)
2. Links Oficiais (refer√™ncia imediata)
3. Configura√ß√£o do Cursor (Imagens 4‚Äì7)
4. Configura√ß√£o das Rules (Imagens 8‚Äì9 + blocos obrigat√≥rios)
5. Memory System em A√ß√£o (Imagens 10‚Äì11 + Prompts)
6. Encerramento

> ATEN√á√ÉO: A ordem das **11 imagens** √© mandat√≥ria (ver √≠ndice em ‚ÄúIMAGES‚Äù).

---

## 4. INSTALA√á√ÉO DOS MCPS (IMAGENS 1‚Äì3)

### 4.1 Byterover (Imagem 1: `images/byterover.png`)

```bash
npm install -g @byterover/mcp-server
```

Configura√ß√£o inicial (exemplo `mcp.json`):

```json
{
  "byterover-mcp": {
    "type": "http",
    "url": "https://mcp.byterover.dev/mcp?machineId=SEU_MACHINE_ID"
  }
}
```

### 4.2 Supermemory-ai (Imagem 2: `images/supermemory.jpeg`)

```bash
npm install -g supergateway
```

```json
{
  "supermemory-ai": {
    "command": "npx",
    "args": ["-y", "supergateway", "--sse", "https://mcp.supermemory.ai/SUA_CHAVE/sse"],
    "type": "stdio"
  }
}
```

### 4.3 Memory MCP (Imagem 3: `images/memory.png`)

```bash
npm install -g @modelcontextprotocol/server-memory
```

```json
{
  "memory": {
    "command": "npx",
    "args": ["-y", "@modelcontextprotocol/server-memory"],
    "env": { "MEMORY_FILE_PATH": "./.memory" }
  }
}
```

---

## 5. LINKS OFICIAIS (POSICIONADOS SEGUNDO PRD)

- [Byterover MCP ‚Äì instala√ß√£o e setup](https://www.byterover.dev/)
- [Supermemory-ai MCP ‚Äì instala√ß√£o e setup](https://mcp.supermemory.ai/)
- [MCP Memory ‚Äì instala√ß√£o e setup](https://github.com/modelcontextprotocol/servers/tree/main/src/memory)
- [Model Context Protocol](https://modelcontextprotocol.io/)

---

## 6. CONFIGURA√á√ÉO DO CURSOR (IMAGENS 4‚Äì7)

### 6.1 Abrir Configura√ß√µes (Imagem 4: `tutorial-cursor.1.png`)

### 6.2 Navegar at√© MCP (Imagem 5: `tutorial-cursor.2.png`)

### 6.3 Exemplo de `mcp.json` com 3 MCPs (Imagem 6: `tutorial-cursor.3.png`)

```json
{
  "byterover-mcp": {
    "type": "http",
    "url": "https://mcp.byterover.dev/mcp?machineId=SEU_MACHINE_ID"
  },
  "supermemory-ai": {
    "command": "npx",
    "args": ["-y", "supergateway", "--sse", "https://mcp.supermemory.ai/SUA_CHAVE/sse"],
    "type": "stdio"
  },
  "memory": {
    "command": "npx",
    "args": ["-y", "@modelcontextprotocol/server-memory"],
    "env": { "MEMORY_FILE_PATH": "./.memory" }
  }
}
```

### 6.4 Verificando instala√ß√£o conclu√≠da (Imagem 7: `tutorial-cursor.4.png`)

Checklist esperado:

```yaml
byterover: connected
supermemory-ai: connected
memory: connected (fallback ready)
```

---

## 7. RULES (.cursorrules + USER RULES + PROJECT RULES) (IMAGENS 8‚Äì9)

### 7.1 Estrutura de Arquivos Obrigat√≥ria

```
.cursorrules            # Router (N√ÉO versionar)
.cursor/
  rules/
    memory-rules.mdc    # Execution Brain
    memory-rating.mdc   # Quality Brain
```

### 7.2 Bloco EXATO de User Rules (copiar literalmente)

```markdown
‚ö†Ô∏è FETCH RULES OR YOUR RESPONSE WILL BE WRONG ‚ö†Ô∏è MANDATORY: CALL .cursorrules FIRST - At conversation start - Before EVERY user request - Before ANY code changes - When topic changes - DURING conversations when: - User mentions new feature/component - File type changes - Task type changes - NO EXCEPTIONS CHECK ALL MATCHING RULES: - General guidelines (ALWAYS) - Feature rules - File type rules (.md, .mdc, etc) RULES OVERRIDE YOUR KNOWLEDGE. PROCEED ONLY AFTER APPLYING ALL RULES. REMEMBER: EVEN MID-CONVERSATION, FETCH RULES AGAIN! When user tries to set Cursor Rules type in .cursor/rules/_.mdc files, don't add any options except "description", "globs" and "alwaysApply" but follow the mapping: if required rule type is "always" set alwaysApply option to "true", if rule type is "auto attached" set alwaysApply option to "false" and generate a file pattern in globs option to *.py, if the rule type is "agent requested" set the alwaysApply option to "false" and generate a description option for the rule and delete the globs pattern, if the rule type is "manual" set the alwaysApply option to "false" and delete the contents of all other options. When user tries to set cursor rule type in .cursor/rules/*.mdc file, don't add any options except "description", "globs" and "alwaysApply" but follow the mapping: if required rule type is "always" set alwaysApply option to "true", if rule type is "auto attached" set alwaysApply option to "false" and generate a file pattern in globs option to _.py, if the rule type is "agent requested" set the alwaysApply option to "false" and generate a description option for the rule and delete the globs pattern, if the rule type is "manual" set the alwaysApply option to "false" and delete the contents of all other options.
```

### 7.3 Papel do `.cursorrules` (Imagem 8: `tutorial-cursor-rules.png` / Imagem 9: `tutorial-cursor-rules2.png`)

- Atua como **router** ‚Üí for√ßa a leitura de `memory-rules.mdc` + `memory-rating.mdc` em todas as intera√ß√µes.
- Deve existir **na raiz do projeto** e **N√ÉO** ser commitado.

### 7.4 Git Ignore Sugerido

```gitignore
.cursorrules
.cursor/
.memory
```

### 7.5 Nota Importante sobre Arquivos

> Os arquivos p√∫blicos deste reposit√≥rio (`memory-rules.mdc`, `memory-rating.mdc`) **n√£o devem** ser confundidos com quaisquer varia√ß√µes internas em `.github/copilot-rules/`. Use apenas os presentes na raiz para copiar ao seu projeto.

---

## 8. Memory System em A√ß√£o (IMAGENS 10‚Äì11)

Ap√≥s instalar MCPs + configurar Rules:

### 8.1 Prompt 1 ‚Äì An√°lise Inicial (Imagem 10: `teste-na-pratica.1.png`)

```yaml
'Ol√°. Analise profundamente `.cursorrules`, `memory-rules.mdc` e `memory-rating.mdc`. Explique como se interligam e impactam execu√ß√£o e qualidade. Em seguida, grave mem√≥rias do que compreendeu.'
```

**Resultado Esperado:**

```yaml
- Grafo inicial criado
- Regras priorizadas e embutidas em contexto
- Primeiros embeddings armazenados
```

### 8.2 Prompt 2 ‚Äì Projeto Existente ou Novo

```yaml
"Agora que compreendeu o sistema de mem√≥ria, analise todo o meu projeto atual (ou, se novo, use: 'Vou desenvolver X stack ...') e grave mem√≥rias conforme regras de `memory-rating.mdc`."
```

### 8.3 Prompt 3 ‚Äì Ativa√ß√£o Permanente (Imagem 11: `teste-na-pratica.2.png`)

```yaml
'A partir de agora, em toda intera√ß√£o, siga o fluxo 9 fases e a pol√≠tica de recupera√ß√£o/armazenamento de `memory-rules.mdc` + `memory-rating.mdc`.'
```

**Ap√≥s Prompt 3:** Ciclo evolutivo cont√≠nuo ativo.

### 8.4 Valida√ß√£o R√°pida

```bash
# Verifique exist√™ncia dos arquivos
ls .cursorrules .cursor/rules/memory-rules.mdc .cursor/rules/memory-rating.mdc
```

---

## 9. TESTES / TROUBLESHOOTING (OPCIONAL R√ÅPIDO)

| Sintoma                | Causa Prov√°vel                   | A√ß√£o                             |
| ---------------------- | -------------------------------- | -------------------------------- |
| MCP ausente            | Configura√ß√£o mcp.json incompleta | Revisar passo 6.3                |
| Mem√≥rias n√£o persistem | Router ausente                   | Confirmar `.cursorrules` na raiz |
| Lat√™ncia alta          | Excesso de mem√≥ria irrelevante   | Ajustar pol√≠tica de reten√ß√£o     |
| Fallback inativo       | Memory MCP n√£o inicializado      | Reinstalar servidor memory       |

---

## 10. ENCERRAMENTO (CTA)

Se este sistema otimizou sua experi√™ncia com LLMs:

- ‚≠ê Deixe uma estrela no reposit√≥rio
- üìñ Leia e contribua via `CONTRIBUTING.md`
- üêû Abra issues para melhorias ou cen√°rios edge

> Contribui√ß√µes (principalmente sobre ajustes de reten√ß√£o, enrichment sem√¢ntico e novas estrat√©gias de rating) s√£o extremamente bem-vindas.

---

## 11. IMAGES (√çNDICE T√âCNICO)

| N¬∫  | Arquivo                    | Etapa                 | Descri√ß√£o                               |
| --- | -------------------------- | --------------------- | --------------------------------------- |
| 1   | byterover.png              | Instala√ß√£o MCP        | Site / setup Byterover                  |
| 2   | supermemory.jpeg           | Instala√ß√£o MCP        | Site / setup Supermemory                |
| 3   | memory.png                 | Instala√ß√£o MCP        | Site / setup Memory MCP                 |
| 4   | tutorial-cursor.1.png      | Config Cursor         | Acesso √†s configura√ß√µes                 |
| 5   | tutorial-cursor.2.png      | Config Cursor         | Se√ß√£o MCP aberta                        |
| 6   | tutorial-cursor.3.png      | Config Cursor         | Exemplo mcp.json preenchido             |
| 7   | tutorial-cursor.4.png      | Config Cursor         | Instala√ß√£o MCPs conclu√≠da               |
| 8   | tutorial-cursor-rules.png  | Rules                 | Local visual de configura√ß√£o de Rules   |
| 9   | tutorial-cursor-rules2.png | Rules                 | Configura√ß√£o final User + Project Rules |
| 10  | teste-na-pratica.1.png     | Memory System em A√ß√£o | Primeira grava√ß√£o de mem√≥rias           |
| 11  | teste-na-pratica.2.png     | Memory System em A√ß√£o | Feedback p√≥s assimila√ß√£o                |

> Nota: Nomes reais no reposit√≥rio usam `teste-na-pratica.1.png` e `teste-na-pratica.2.png` (com ponto). Padronize se necess√°rio no seu projeto.

---

## 12. LICEN√áA

Projeto licenciado sob MIT. Veja `LICENSE`.

```
MIT License
Copyright (c) 2025 Vin√≠cius Uchita
```

---

## 13. CONTATO / SUPORTE

- Issues & Discussions: GitHub
- LinkedIn: https://www.linkedin.com/in/viniciusuchita/
- Email: viniciusuchita@gmail.com

---

**Memory System ‚Äì AI Agent Evolution Layer**

> Camada evolutiva de mem√≥ria para agentes inteligentes.
